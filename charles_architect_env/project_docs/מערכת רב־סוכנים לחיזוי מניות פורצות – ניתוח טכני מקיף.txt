מערכת רב־סוכנים לחיזוי מניות פורצות – ניתוח טכני מקיף
ארכיטקטורת המערכת וזרימת הנתונים

מערכת חיזוי המניות בנויה כמערכת רב־סוכנים )Multi-Agent(, בה כל סוכן הוא מודול AI המתמחה בניתוח זווית שונה של
של כלל המניות, מספר סוכני ניתוח עצמאיים מנתחים כל מניה . הסוכנים פועלים במקביל: לאחר סינון ראשוני  1 המידע
מרכז את התובנות מועמדת בתחומי מומחיות שונים )טכני, פונדמנטלי, חדשות, סנטימנט וכו'(, ולבסוף סוכן קונסולידציה 
. גישה רב־תחומית משולבת זו מבטיחה זיהוי סימנים מקדימים חיוביים 2 1 מכל הסוכנים למתן המלצת השקעה סופית
מכל ההיבטים והפחתת התרעות שווא, בהתבסס על הממצא שכאשר מצטברים כמה סימנים חיוביים מתחומי ניתוח שונים –
. להלן תרשים סכמטי של הארכיטקטורה, הסוכנים והמודלים, וזרימת 4 3 הסבירות לזינוק חד של מניה גדלה משמעותית

הנתונים ביניהם:

ארכיטקטורת מערכת רב-סוכנים לחיזוי מניות פורצות – הסוכנים )בעיגול(, המודלים )מלבן עם קצוות מעוגלים( וקשרי הגומלין
לסוכן ושורט  שוק  נתוני  הרלוונטיים:  הסוכנים  את  מזינים  מקווקוות(  במסגרת  )משמאל,  חיצוניים  מידע  מקורות  העיקריים. 
הסינון הראשוני והסוכן הטכני; נתוני פיננסים לסוכן הפונדמנטלי; חדשות לסוכן החדשות; נתוני מדיה חברתית ומגמות חיפוש
לסוכן הסנטימנט. הסוכן הסינון הראשוני מספק רשימת מניות מועמדות להמשך, ואלו מועברות לכל סוכני הניתוח המקבילים.
בסוף, סוכן הקונסולידציה )בירוק( מקבל מכל סוכן ניתוח "סיגנל" או ציון חלקי, משקלל אותם לציון סופי והמלצת השקעה,

שנשמרים במאגר נתונים לצרכי מעקב ואימון.

זרימת המידע: בתחילה סוכן הסינון הראשוני סורק את כלל המניות בשוק ומאתר חריגות חשודות – רק המניות שעוברות
. עבור כל מניה מועמדת, פועלים במקביל מספר סוכני ניתוח מומחים: סוכן 5 להמשך את רף הסינון נחשבות מועמדות 
שלו, בתחום  חיצוניים  מידע  מושך מקורות  מומחה  סוכן  כל   . 6 מרשתות וסנטימנט  חדשות/אירועים,  פונדמנטלי,  טכני, 
אוסף את כל . לבסוף, סוכן הקונסולידציה  7 )signal( למניה מנקודת המבט שלו או אות  מבצע ניתוח ייעודי, ומפיק ציון 
הסיגנלים והציונים מן הסוכנים המומחים, ומשקלל אותם לכדי ציון משוקלל סופי והמלצת השקעה )לדוגמה: דירוג “קנייה” או
. סוכן הקונסולידציה פועל כמעין מודל-על )meta-model( המממש את מדיניות ההחלטה שהוגדרה: שילוב 2 דגל התראה(

8 של מספר סימנים חיוביים מגביר את ההסתברות לאתר “כוכב נולד”, בעוד שסיגנל בודד וחלש לרוב אינו מספיק להמלצה
הצטברות זאת,  לעומת  השקעה;  המלצת  תתקבל  לא  כנראה  שליליים –  השאר  וכל  חיובי  אחד  גורם  רק  אם  כלומר,   . 9

. להלן פירוט מקיף 3 8 סימנים חיוביים טכניים, פונדמנטליים וסנטימנט חזקה יחד תוביל לציון גבוה ולהמלצת "קנייה"

1



של הסוכנים )הליבה ותתי-הסוכנים(, תפקידיהם, אופן פעולתם, והאינטראקציה ביניהם, ולאחר מכן פירוט המודלים וקבצי
הקוד במערכת.

סוכני המערכת ותתי-הסוכנים: תפקידים ופעולות
סוכן סינון ראשוני )אנומליות(: זהו הסוכן הפותח, המהווה שלב סינון רחב על אלפי המניות בזירה. תפקידו לסרוק במהירות
את כלל ה־Universe של המניות ולאתר התנהגויות חריגות מחשידות שעשויות לרמז ש"משהו מתבשל" מתחת לפני השטח
. הסינון מתבצע בשני שלבים: )1( סינון כמותי בסיסי לפי קריטריונים מינימליים – למשל הסרת מניות זעירות )שווי שוק 10

. סינון קשיח זה 11 מתחת $50M(, מניות עם מחזור מסחר זניח, או חברות עם הפסדים כרוניים ללא צמיחה במשך שנים
מבטיח שרק מניות "השקעה אפשרית" במונחי גודל ונזילות נשארות ברשימה. ניתן גם לסנן החוצה חברות שלא הרוויחו מספר
זיהוי  )2( . 11 מפנה( בשלבי  צמיחה  חברת  של  מקרה  גבוהה )קרי,  מאוד  הכנסות  צמיחת  דווקא  יש  אם  אלא  ברצף  שנים 
אנומליות מקדימות: מתוך המניות ששרדו את השלב הראשון, האלגוריתם מחפש סימנים מקדימים חריגים בהתנהגות המניה
. בין היתר, הסוכן בודק תופעות כגון: נפח מסחר יומי חריג )למשל 10 שעשויים להוות אינדיקציה מוקדמת לזינוק חד קרוב
ביחס להיסטוריה )סטיות תקן מעל הרגיל(, פריצת מחיר משמעותית גדול פי כמה מהממוצע החודשי(, תנודתיות קיצונית 
Short Squeeze לשיא חדש לאחר דשדוש ממושך, או שיעור שורט גבוה במיוחד )אחוז מכירות בחסר עצום( היכול לבשר על
. הופעת אחד או יותר מהאותות הללו מסמנת שהמניה מתנהגת באופן לא שגרתי – ייתכן שמידע פנימי 13 12 פוטנציאלי
. סוכן הסינון מפעיל כללי החלטה מבוססי סטטיסטיקה 14 דלף, ידיים חזקות אוספות מניות, או אירוע משמעותי מתקרב
)למשל: נפח מסחר <300% מהממוצע, תנודה יומית <X סטיות תקן, וכו'( כדי לקבוע אם כל מניה עוברת את סף האנומליה
. הפלט שלו הוא בינארי בעיקרו – הוא לא נותן ציון חיובי להשקעה אלא פשוט מסמן אילו מניות "עוברות" להמשך 16 15

. מניות שעוברות את הסינון יזכו ל"אור ירוק" – יועברו אל סוכני הניתוח 17 ניתוח ואילו נפסלות כמועמדות לא מבטיחות
המעמיק הבאים, וניתן גם לדרג אותן לפי מידת החריגות כדי לתעדף משאבים )למשל, ציון אנומליה גבוה למניה שקפצה 20%
. בכך הסוכן מצמצם מאוד את רשימת המניות ומונע "רעשי רקע" – המיקוד ממשיך רק עם מספר 5 ללא סיבה נראית לעין(

. 5 מצומצם של מועמדות שפוטנציאלית מקיימות סימנים מקדימים משמעותיים לראלי

של המניה המועמדת, במטרה לזהות איתותים טכניים סוכן המתמקד בניתוח גרף המחיר ונפחי המסחר  סוכן ניתוח טכני: 
. הוא אוסף את נתוני המחיר ההיסטוריים )גרף יומי/שבועי/חודשי( ונתוני נפח המסחר של המניה 18 חיוביים מקדימים לראלי
, וכן נתונים טכניים נוספים כמו ממוצעים נעים 19 )API באמצעות Alpha Vantage או Yahoo Finance ממקורות שוק )כגון
. באמצעות כלים אלו, הסוכן מזהה דפוסים טכניים חיוביים 20 כדוגמת RSI ו-MACD, ושיעור שורט עדכני )MA(, מתנדים 
)חצייה שורי של  Golden Cross :בין האיתותים האפשריים . 18 שמעידים על מומנטום או שינוי מגמה לפני פריצה גדולה
)קו MACD חוצה מעל קו המעידים על מומנטום חזק, אות MACD שורי  ממוצע 50 יום מעל 200 יום(, ערכי RSI גבוהים 
כמו התכווצות תנודתיות )Volatility Contraction Pattern – דפוס VCP( או תבנית דגל האיתות(, תבניות פריצה גרפיות 
עשרות מחשב  הטכני  הסוכן   . 22 21 ועוד גבוה,  מסחר  נפח  עם  התנגדות  רמת  מעל  פריצה  עולה,  מחזור  בליווי  שורי 
,Stochastic ,בולינגר  ,RSI של מהיר  לחישוב  בפייתון   TA-Lib כמו ייעודיות  ספריות  באמצעות  למשל   – אלו  אינדיקטורים 
– וכן מריץ אלגוריתמים לזיהוי תבניות נרות יפאניים ותצורות מורכבות. במידת הצורך ניתן אפילו לשלב מודל  24 23 וכו'
או משולש מתכנס מתקדמות )לדוגמה, רשת נוירונים שמזהה אוטומטית תצורות דגל  Machine Learning לזיהוי תבניות 
. פלט הסוכן הוא ציון טכני המשקף עד כמה המניה "מוכנה לזינוק" מבחינת הגרף – ציון גבוה יינתן אם מתקיימים 25 בגרף(
. להערכת המודל, 27 26 יחד עם פריצת שיא בנפח גבוה(  Golden Cross בו-זמנית מספר איתותים טכניים חזקים )למשל
. למעשה, ניתוח 29 28 המשקל היחסי של הסיגנל הטכני בהחלטה הסופית הוא משמעותי – כ־20%–25% מהציון הכולל
לראלי גדול, ולכן אם הציון הטכני נמוך )נניח המניה עדיין במגמת ירידה(, הסיכוי לקבל טכני טוב הוא כמעט תנאי הכרחי 
. מנגד, כאשר האיתותים 31 30 המלצה סופית קטן מאוד – אפילו חדשות או הייפ לא יצילו מניה שנראית חלשה טכנית
הכניסה עיתוי  את  מסמן  הטכני  כי  ההחלטה,  את  ולהטות  לציון  ניכר  חלק  לתרום  יכול  הסוכן  מאוד,  חיוביים  הטכניים 

האופטימלי.

סוכן ניתוח פונדמנטלי: סוכן הבוחן את נתוני הבסיס העסקיים והפיננסיים של החברה, במטרה לוודא שלמניה יש "סיפור"
המצדיקה עליה משמעותית אמיתי שתומך בזינוק – חברה עם צמיחה מהירה, שיפורים דרמטיים בביצועים, או חדשנות 
ממאגרי מידע – למשל נתוני רווח למניה )EPS(, הכנסות, שולי רווח, . הסוכן אוסף נתונים פיננסיים מקיפים  33 32 בערכה

)ספריית  Yahoo  Finance כגון   API באמצעות   – ושנתיים  רבעוניים  דוחות  ותוצאות   )P/E,  PEG )כמו  פיננסיים  יחסים 

2



לשלוף ניתן  הצורך  במידת   . 35 34 Financial Modeling Prep דוגמת שירותים  או   ,Alpha Vantage או  ) yfinance
,parsers )BeautifulSoup ולחלץ מספרים בעזרת SEC של EDGAR דרך מערכת )K/Q-10( נתונים ישירות מדוחות כספיים
– לחלץ את . כמו כן, הסוכן הפונדמנטלי יכול לבצע ניתוח טקסט )NLP( על דו"חות כספיים ושיחות ועידה  37 36 וכו'(
. הוא בוחן מדדי צמיחה 39 38 הטון והסנטימנט של הנהלת החברה, למשל זיהוי טרמינולוגיה חיובית יוצאת דופן בתחזיות
איכותיים: עליות של עשרות אחוזים בהכנסות או ברווחים משנה לשנה, האצה בקצב הצמיחה, הפתעות רווח חיוביות, שולי
. בנוסף מאתר חדשנות "שוברת שוויון" – למשל השקת מוצר 41 40 רווח במגמת עלייה, ירידה במינוף )הפחתת חוב(, ועוד
. אירועים 43 42 פורץ דרך או טכנולוגיה ייחודית )מחקר הראה שכ-95% מ"המנצחות הגדולות" הציגו פריצת דרך טכנולוגית(
לרווח מהפסד  מעבר  מחדש,  ארגון  חזון(,  עם  חדש  )מנכ"ל  משמעותיים  הנהלה  שינויי  אליהם:  לב  שם  שהסוכן  נוספים 
)Turning profitable( לאחר תקופה ארוכה של הפסדים – כל אלה סימנים פונדמנטליים חיוביים שהחברה עברה לשלב חדש
קטן )היצע מניות ציבוריות מוגבל( תקבל ניקוד, כי  Free Float הסוכן מתחשב גם במבנה ההון – מניה עם . 45 44 ומבטיח
מדדים בעזרת   . 47 46 הזינוק בעת  זמינות  מניות  מיליון  מ-25  פחות  בעלות  היו  בחדות  שזינקו  מהמניות  שכ-95%  הוכח 

ויחסים, ייתכן שימוש בשיטות דירוג כמו CANSLIM )של וויליאם אוניל( או יחס PEG כדי להעריך את איכות הצמיחה, ואף
. פלט הסוכן הוא ציון פונדמנטלי 48 המנבא האם חברה היא "צמיחת-על" על סמך הנתונים ההיסטוריים שלה  ML מודל
המשקף את חוסן החברה: נתונים פיננסיים מצוינים יעלו משמעותית את ציון המניה, בעוד נתונים גרועים מאוד יורידו אותו
. הפונדמנטל משמש כמעין "פילטר איכות": אם יתר הסוכנים מתלהבים אך החברה חלשה בבסיס – המערכת 49 באופן ניכר
הסיגנל של  היחסי  משקלו   . 51 50 )Pump  &  Dump תרחישי  )מניעת  בסיס  חסר  לסנן הייפ  כדי  זהירות  לנקוט  תטה 
. עם זאת, במקרה קיצון של "מניית מם" שבה 52 49 הפונדמנטלי מוערך כבינוני-גבוה )כ־20%–25% מההחלטה הסופית(
הסנטימנט הציבורי יוצא דופן )כמו GameStop בזמנו(, המערכת עשויה להפחית את משקל הפונדמנטל – כלומר להתעלם
מנתונים בינוניים אם ההייפ חזק במיוחד – אך לרוב גם במקרים אלו יידרש לפחות בסיס עסקי סביר בשילוב עם הסיגנלים

. 53 האחרים

סוכן ניתוח חדשות/אירועים: סוכן המשמש כ"רדאר" לחדשות חמות ואירועים חיצוניים משמעותיים סביב החברה, שיכולים
החדשות סוכן  החברה",  בתוך  קורה  "מה  בוחן  הפונדמנטלי  הסוכן  בעוד   . 55 54 במניה לזינוק  מיידי  כטריגר  לתפקד 
מתמקד באירועים חיצוניים – רגולטוריים, עסקיים או מאקרו-כלכליים – שעשויים לשנות דרמטית את שווי החברה בן־לילה
)למשל אחר כותרות חדשותיות ודיווחים הנוגעים לחברה: מתחבר לזרמי חדשות פיננסיות  . הוא עוקב בזמן אמת  57 56

News API כללי, או מקורות כמו Bloomberg/Yahoo Finance, ואף אתרי חדשות מקומיים במקרה של מניות ישראליות(
אתר )דרך  מהחברה  לעיתונות  רשמיות  להודעות  מאזין  הוא  בנוסף,   . 59 58 המניה סמל  לפי  אחרונות  כתבות  לקבלת 
– כגון החברה, דיווחי SEC/Edgar עבור חברות אמריקאיות, או מגופים רגולטוריים כמו FDA( וללוחות אירועים עתידיים 
. 61 60 תאריכי הכרעה באישור תרופות )FDA Calendar(, מועדי פרסום דו"חות כספיים, כנסים והשקות מוצרים מתוכננות

לאחר איסוף המידע, הסוכן מפעיל ניתוח NLP על כותרות החדשות כדי להעריך את סנטימנט החדשות )חיובי/שלילי( ואת
אסטרטגית", "שותפות  "רכישה",  "מאושר",  כמו  טוב  מבשרי  וביטויים  מפתח  מילות  יחפש  הוא  למשל,  האירוע.  עוצמת 
. ניתן גם להשתמש במודל סיווג 63 62 "הנפקה", "כניסה למדד" וכו' כדי לזהות ידיעות חיוביות בעלות פוטנציאל השפעה
טקסט מתקדם – למשל BERT מעולם ה-NLP, שעבר Fine-Tune על חדשות פיננסיות – כדי לנבא האם ידיעה מסוימת צפויה
. מעבר לכך, הסוכן מזהה אירועים קריטיים ידועים כמעט תמיד מקפיצים 65 64 להשפיע בצורה מהותית על מחיר המניה
מניות: למשל אישור תרופה פורצת דרך ב-FDA )בביוטק( – אירוע שיכול להכפיל ערך חברה קטנה בלילה; הודעה על רכישה
)כגון מרכזי  במדד  הנרכשת; הכללה  החברה  במחיר  אחוזים  עשרות  של  לזינוק  מיידית  כמעט  גורמת   –  )M&A( מיזוג או 
– מביאה לביקושים עצומים מקרנות מדדים ולרוב לעליית מחיר )בסביבות 5% ואף יותר( סביב ההודעה; זכייה  )S&P500
בחוזה ענק או שיתוף פעולה עם חברה מובילה – מעלה ציפיות לצמיחה; תוצאות ניסוי קליני מוצלח; השקת מוצר חדש
רלוונטיות )חקיקה חדשה, שינוי רגולציה בסקטור, מגמות כלכליות . הסוכן מנטר גם חדשות מאקרו  67 66 פורץ דרך, וכו'
. הפלט הוא סיגנל חדשותי – למעשה הערכה האם התרחש 68 כלליות( שעלולות להשפיע ישירות על החברה או תעשייתה
"אירוע זהב" שעשוי להצית ראלי. מערכת הניקוד היא דינמית: אם זוהה אירוע חדשותי משמעותי וחד-משמעי )נניח, אישור
FDA לתרופה, דו"ח רבעוני מעולה, הודעת רכישה גדולה( – הסוכן עשוי לתת משקל כבד מאוד לאותו אירוע, עד כדי הטיית כל
. במקרים כאלה, החדשות הן הקטליזטור המיידי לזינוק ולכן יכולות לקבל משקל 70 69 ההחלטה הסופית לכיוון "השקע"
. לעומת זאת, בהיעדר חדשות 72 71 של עד ~30% בציון הכולל )הסוכן החדשותי עשוי להיות החשוב ביותר בטווח הקצר(
, הסוכן פשוט לא יוסיף נקודות )או יתן ציון ניטרלי(, כך שאם אין שום אירוע חריג – תרומת החדשות תהיה אפסית או מיוחדות
. בצורה כזו, המערכת לא "תעניש" מניה שאין סביבה באזז חדשותי, אך כאשר יש חדשה גדולה – היא 74 73 משנית בהחלטה

בהחלט תופסת מקום נכבד בהחלטת ההשקעה.

3



סוכן ניתוח סנטימנט )מדיה חברתית(: סוכן שתפקידו למדוד את מידת ההתלהבות והעניין של קהל המשקיעים הרחב במניה
שסביב המניה – לפעמים ההייפ עצמו הוא הכוח הדוחף את המחיר מעלה )תופעת "מניית ברשת, כלומר לזהות באזז חריג 
. הסוכן סורק רשתות חברתיות ונתוני חיפוש כדי לגלות האם "הרחוב מדבר על המניה" והאם העניין הציבורי 76 75 מם"(
. הוא מתחבר למקורות כגון: פורומי משקיעים ב-Reddit )בעיקר subreddit פופולרי כמו WallStreetBets, וכן 77 בה גובר
– ; טוויטר  79 78 בפייתון( כדי לשלוף פוסטים ועדכונים חדשים  PRAW פורומי מניות ייעודיים( באמצעות API )ספריית 
; 81 80 ( לניטור ציוצים שמזכירים את שם החברה או את הטיקר )התג $#( tweepy באמצעות Twitter API )ו-library כמו 
פלטפורמת Stocktwits – רשת חברתית למשקיעים – למדידת קצב ועוצמת השיחות על המניה; Google Trends – למעקב
של פייסבוק/טלגרם  קבוצות  לכלול  יכולים  נוספים  מקורות   . 83 82 זמן לאורך  החברה/הטיקר  שם  של  חיפוש  נפחי  אחר 
. 85 84 הציבורי החברה "בשיח"  לכמה  כסמן   )Glassdoor או  Reviews באתרי לקוחות )למשל  ביקורות  נתוני  משקיעים, 
במודלים להשתמש  ניתן  והציוצים:  הפוסטים  תוכן  על  וסנטימנט  טקסט  ניתוח  מפעיל אלגוריתמי  הסוכן  האיסוף,  לאחר 

86 שהוכשרו לשפה פיננסית כמו FinBERT )וריאציית BERT המותאמת לטקסט פיננסי( לניתוח סנטימנט של טקסטים קצרים
. 89 88 או TextBlob למדידת סנטימנט )חיובי/שלילי( בהקשר אינטרנטי  VADER או אפילו כלים פשוטים יותר כמו , 87

בנוסף לסנטימנט, הוא גם כימות נפח הדיונים והאזכורים: עלייה פתאומית במספר הפוסטים על המניה בפורומים, קפיצה
מתחילים משקיעים  שהמון  או  אירוע  מתקרב  )יתכן  מתרחש  שמשהו  ירוק  אלה דגל  כל  טרנדס –  בגוגל  או  הציוצים  בנפח 
בצורה גבוה  )סנטימנט  במיוחד  חיובי  נעשה  הטון  אם  למשל   – חריגים  גם טרנדים  בוחן  הסוכן   . 83 למניה( "להתגייס" 
גדלה המניה  של  הדיון  פורום  אחרי  העוקבים  כמות  אם  או  המניה,  את  מקדם  פתאום  בולט  אם משפיען  או  קיצונית(, 
. במידת הצורך אפשר להפעיל מודלי NLP מתקדמים )אפילו GPT-4 דרך 91 90 ברשת משמעותית – כל אלו סימני הייפ 
API( כדי לנתח לעומק את תוכן הדיונים ולהבין רגשות והתלהבות סמויה, שכן מחקרים הראו שמודלים כאלה יכולים לחזות
. התוצאה היא ציון סנטימנט המבטא עד כמה יש "באזז חיובי" סביב 93 92 את כיוון תגובת המניה לחדשות עוד לפני השוק
המניה. למשקל הסנטימנט יש חשיבות בינונית אך לא מבוטלת: במחקרי עבר ראינו שבמקרים כמו GameStop ו-AMC, באזז
. לכן המערכת כברירת מחדל תיתן משקל ניכר )~15%– 95 94 למרות יסודות חלשים אדיר ברשת דחף את המניות מעלה 
. המשקל עשוי אף לעלות עבור מניות קטנות עם שיעור שורט גבוה )שבהן התלהבות אונליין 96 94 20%( לסנטימנט הרשת
בטרנדים המובילות  בין  נניח   – ברשת  היום"  "שיחת  היא  שהמניה  מזהה  הסוכן  אם   . 97 )Short  Squeeze להצית יכולה 
ציבורי שהייפ  משום  בפונדמנטל,  חסרים  על  לפצות  ואף  ההחלטה  את  משמעותית  להטות  יכול  שלו  הציון  ברדיט/טוויטר – 
. לעומת זאת, אם אין כל דיון ציבורי על המניה, היא לא תיפסל – פשוט תקבל 0 99 98 קיצוני יכול כשלעצמו ליצור ראלי
חשובה כתוספת  משמש  ברשת  הסנטימנט  כך   . 100 זה במקרה  הזה  מהגורם  תתעלם  המערכת  כלומר  סנטימנט,  נקודות 
כשקיימת התלהבות יוצאת דופן, אך לא יגרום לניפוי מניות שקטות )בדיוק כפי שמניות רבות עולות יפה "מתחת לרדאר" ללא

הייפ מוקדם(.

סוכן קונסולידציה )סוכן ליבה מרכזי(: הסוכן המסכם, שתפקידו לקבל את כל הסיגנלים מהסוכנים המומחים )טכני, פונד’,
. סוכן הקונסולידציה 2 לגבי כל מניה מועמדת חדשות, סנטימנט, וכן אינדיקציית הסינון הראשוני( ולקבל החלטה סופית 
דירוג )למשל  השקעה  להמלצת  ראויה  המניה  האם  ומחליט  סופי  משוקלל  לכדי ציון  התחומים  מכל  הציונים  את  משקלל 
. ישנן מספר שיטות למזג את התוצאות: שיטה פשוטה היא מודל מבוסס-חוקים עם משקל קבוע לכל 101 8 "קנייה"( או לא
סוכן שסימן  לאנומליות  לסנטימנט, 15%  לחדשות, 15%  לפונדמנטלי, 25%  הטכני, 20%  לאות  משקל  למשל 25%  סוכן – 
Random למשל – . כך מתקבל חישוב ציון משוקלל סופי לכל מניה. לחלופין, ניתן לאמן מודל ML מסכם  103 102 הסינון
Forest או רשת נוירונים – שלומד ממשקלים אופטימליים על בסיס מקרי עבר )נתוני אימון של מניות שזינקו בענק מול כאלה
. המודל המסכם ינבא הסתברות או ציון "פריצה" ויקבע אם המניה עוברת 104 שנכשלו(, תוך הזנת כל האינדיקטורים כפיצ’רים
סף מוגדר להמלצה. בנוסף אפשר לקבוע כללי החלטה לוגיים לצד המודל – למשל לדרוש שלפחות 3 מתוך 5 הסיגנלים יהיו
M&A חיוביים כדי להמליץ, או להגדיר תרחישים שבהם אות חזק במיוחד גובר על חולשה בתחום אחר )כגון: אם יש חדשות
. הפלט של סוכן הקונסולידציה הוא ציון סופי )נניח 0–100( 106 105 חמות, ניתן להתעלם מפונדמנטל חלש באופן חריג(
107 עבור כל מניה, וכן דגל החלטה – למשל "מומלצת לקנייה" או "לא מומלצת" – בהתאם למדיניות וסף החלטה שנקבעו

. שלב ההחלטה הסופית הוא כמובן בעל משקל 100% )הוא הקובע בפועל(, אבל הוא מבוסס ישירות על פלט הסוכנים 108

את מגביר  חיוביים  גורמים  כמה  של  במערכת: שילוב  שהוגדר  העיקרון  את  מממש  הקונסולידציה  סוכן  למעשה,   . 109

הביטחון בהשקעה. אם רק תחום אחד “ירוק” וכל היתר אדומים – לא תהיה המלצה. אך אם הטכני, הפונדמנטל והסנטימנט
. גישה זו 9 8 כולם חיוביים, ולצידם אולי אירוע חדשות משמעותי – המניה תקבל ציון גבוה ותדורג כהשקעה מבטיחה
לתשואה יחד, ההסתברות  מצטברים  מוקדמים  סימנים  כמה  שכאשר  שמצא  ההיסטורי  המחקר  עם  אחד  בקנה  עולה 

 . 110 3 פנומנלית עולה משמעותית

4



מודלים, קבצי קוד ורכיבי עזר במערכת
הטמעת המערכת דורשת מספר מודולים, קבצי קוד ועזרים טכניים, שכל אחד מממש חלק מהפונקציונליות שתוארה לעיל.

להלן פירוט הקבצים/מודולים העיקריים במערכת והכלים המשולבים בהם:

מודול רכישת נתונים )Data Ingestion( – רכיב האחראי לשליפת נתוני שוק בזמן אמת ונתונים פיננסיים. הוא כולל  •
( או שירות Alpha Vantage לציטוטי yfinance קריאות API למקורות כמו Yahoo Finance )באמצעות ספריית 
. מודול זה יבצע עדכונים תקופתיים )למשל אחת לכמה דקות( כדי לספק 111 מניות, מחירי היסטוריה ונפחי מסחר

כמו פיננסי  מאתר  גרידה  למשל  בחסר( –  מכירות  )אחוז  שורט  שולף נתוני  הוא  כן,  כמו  עדכניים.  נתונים  לסוכנים 
. בנוסף, המודול 112 או שימוש ב-API ייעודי )Polygon/Quandl( לקבלת נתון Short Float באופן אוטומטי  Finviz
לסוכן חדשות  כותרות  להזרים  כדי   ,Alpha Vantage News feed או  NewsAPI דרך  אמת  בזמן  לחדשות  מנוי 
( לקבלת מגמות חיפוש עבור סוכן pytrends , וכן עושה שימוש ב-Google Trends API )ספריית  113 האירועים

. מודול זה הוא ה"צינור" המזין את כל הסוכנים בנתונים חיצוניים טריים. 114 הסנטימנט

סוכן הסינון הראשוני – קובץ )InitialFilterAgent.py( – מימוש אלגוריתם הסינון הרחב. קובץ זה טוען את רשימת  •
כלל המניות ואת הנתונים הבסיסיים מכלל השוק )דרך מודול הנתונים(, ומבצע את סינון השלבים: ראשית סינון קשיח

10 לפי פרמטרים )המינימום לשווי שוק, נזילות, וכו'(, ולאחר מכן חישוב סטיות ואנומליות על המחירים והנפחים
. הלוגיקה מורכבת מכללי סף הניתנים להגדרה )הערכים לאנומליות כגון “נפח < 3σ”, “תנודה <10%” וכו' – אפשר 15

לשמור אותם בקובץ תצורה(. המודול עשוי להריץ סריקה תדירה )למשל כל 5 דקות( על נתוני המסחר כדי לתפוס
, או להיעזר בשירות סריקה חיצוני )אם זמין API(. פלט המודול הוא אובייקט המכיל את 115 חריגות בזמן כמעט-אמת

רשימת המניות המועמדות )לדוגמה, רשימת טיקרי מניות שעברו את הסינון, עם ציון חריגות לכל אחת(.

סוכן ניתוח טכני – קובץ )TechnicalAnalysisAgent.py( – מכיל מימוש הניתוח הטכני עבור מניה מועמדת נתונה.  •
של המניה )דרך מודול הנתונים( – למשל גרף יומי ל-~1–2 שנים הקובץ מושך את נתוני המחיר והנפח ההיסטוריים 
TA-Lib שונים, נעזר בספריית אחרונות, ונתוני אינטראדיי אם רלוונטי. לאחר מכן, הוא מחשב אינדיקטורים טכניים 

מחשב וכן   , 24 21 וכו'(  RSI,  MACD,  Bollinger  Bands נעים,  )ממוצעים  מדדים  עשרות  במהירות  לחשב  כדי 
Relative Volume )נפח יחסי לעומת ממוצע( ו-Volatility )סטיית תקן( כדי לכמת חריגות. הוא כולל אלגוריתמים לזיהוי
תוך תנודתיות  )ירידת   VCP דפוס קיום  הבודקת  פונקציה   ,Golden Cross לזיהוי פונקציה  למשל   – גרף  תבניות 
היווצרות סדרת שפלים עולה(, איתור פריצה של מחיר מעל רמת התנגדות וכו'. עבור דפוסים מסובכים, המודול יכול
( שמסווג אוטומטית את סדרת המחירים האם יש בה pattern_model.pkl לטעון מודל ML מאומן )למשל קובץ 
האינדיקטורים ערכי  עם  אובייקט  מחזיר  המודול   – טכני  חישוב ציון  היא  התוצאה   . 25 מוכרת פריצה  תבנית 
את המשקלל  עד 100  מ-0  מספר  )למשל  המסכם  והציון  שמצא,   )True/False( הבינאריים  האיתותים  העיקריים, 

עוצמת האותות הטכניים(.

הפיננסיים הנתונים  בדיקת  את  מממש   –  )FundamentalAnalysisAgent.py( קובץ  – פונדמנטלי  ניתוח  סוכן   •
)דרך המודול הראשי או ישירות דרך API/database( כגון: נתוני רווח והכנסה 4 לחברה. הוא קורא נתוני פיננסים 
,P/E, PEG( יחסים פיננסיים עדכניים ,)רבעונים אחורה, מגמת צמיחה שנה מול שנה, תחזיות קונצנזוס )אם זמינות
. בנוסף, המודול עשוי למשוך טקסט של הקול הקודם 35 116 חוב/הון, וכו'(, ושיעור המכירות בחסר )Short( העדכני
סנטימנט עליו ניתוח  ולהריץ   – בדו"ח  מנכ"ל  מכתב  או   )Conference  Call  transcript( החברה  הנהלת  של 
טון את  לסווג  כדי  לפיננסים(  ייעודי   BERT מודל(  FinBERT של שילוב  לדוגמה,   .NLP מודל באמצעות  טקסטואלי 
אם נקודות   X+ ,למשל ונקודות:  כללים  סט  בסיס  על  פונדמנטלי  מחשב ניקוד  הקובץ   . 117 כחיובי/שלילי הדברים 
הצמיחה בהכנסות < 20% שנתי, +Y נקודות אם ה-EPS צמח ביותר מ-30% וכו', וניקוד נוסף על חדשנות )אם החברה
. כמו כן, הוא מכיל לוגיקה להפחתת ניקוד על חולשות – לדוגמה, אם 118 42 הכריזה על מוצר מהפכני לאחרונה(
וכן רשימת גורמים בולטים )למשל החברה עדיין מפסידה כסף או אם החוב גדל. בסוף, הוא מחזיר ציון פונדמנטלי 

"EPS צמח ב-50% – חיובי", "חוב גדל – שלילי"(.

5



סוכן ניתוח חדשות – קובץ )NewsAnalysisAgent.py( – מטפל במשימת ניטור וניתוח החדשות והאירועים. הוא  •
מקבל כקלט את הטיקר/שם החברה, וקורא את ממשקי החדשות )News API, RSS, וכו'( כדי לשלוף כותרות עדכניות
. הוא עשוי גם לגשת למאגרי מידע על אירועים צפויים )כמו תאריכי FDA, תאריכי דו"חות( 113 58 וחדשות אחרונות
הנמצאים ברשימות קבועות. עבור כל ידיעה שנשלפה, המודול משתמש במודל NLP כדי להעריך את סוג הידיעה –
לדוגמה, אם בכותרת מופיעות מילים כמו "Acquisition" או "Partnership", סיווג אוטומטי כחדשה חיובית חזקה.
שהינו מודל BERT שעבר Fine-tune על  news_bert_model.pt )למשל  ניתן לטעון מודל סיווג טקסט מאומן 
ההשפעה מידת  לגבי  ציון  יחזיר  המודל   – והתקציר  הידיעה  כותרת  את  לו  ולמסור  פיננסיות(  חדשות  אוסף 
הטיקר אם  בודק  הוא  ידועים:  רשימת טריגרים  מכיל  המודול  כן,  כמו   . 65 64 וחוזק( )חיובי/שלילי  הפוטנציאלית 
מופיע בהודעת רכישה/מיזוג, אישור מוצר, כניסה למדד, וכד’ – אירועים אלה מוקצים להם נקודות באופן ידני )כדי
. לבסוף, הקובץ מפיק ניקוד חדשותי למניה: למשל 0 אם "אין חדשות 119 66 להבטיח שיקבלו משקל גבוה במיוחד(
ידיעות מספר  עבור  ביניים  וערך   , 120 69 רכישה( הודעת  )כמו  זוהה  זהב"  "אירוע  אם  גבוה  ערך  חשובות", 

חיוביות/שליליות מתונות. הוא גם מצרף ציון סנטימנט ממוצע על החדשות )חיובי, ניטרלי, שלילי(.

מהרשתות המידע  וניתוח  באיסוף  מטפל   –  )SentimentAnalysisAgent.py( קובץ   – סנטימנט  ניתוח  סוכן   •
,)Twitter API v2 או  tweepy (  Twitter ,) PRAW (  Reddit של APIs-החברתיות. בקובץ זה מוגדרים חיבורים ל
. הוא שולף נתונים כגון: הפוסטים האחרונים ב-subreddit המרכזי למניות, 82 78 Google Trends-ו ,Stocktwits
מספר האזכורים של הטיקר בטוויטר בשעות האחרונות, גרף מגמת החיפוש בגוגל וכו'. עבור כל מקור, הפלט הוא
מריץ ניתוח המודול  פוסטים/ציוצים.  למדגם  טקסטואלי  תוכן  וכן  הגידול,  וקצב   )count( הדיונים  כמו כמות  מדדים 
על התוכן: עבור טקסטים קצרים ולא מובנים )כמו פוסט רדיט עמוס סלנג(, אפשר להשתמש סנטימנט טקסטואלי 
. לחלופין, ניתן ליישם מודל FinBERT פה גם, 89 בכלי לקסיקלי כמו VADER או TextBlob כדי לקבל סנטימנט כללי
או אפילו GPT-3/4 שיסווג את הטקסט )בהינתן המשאבים לכך(. המודול מחשב מדד באזז: למשל מספר הפוסטים על

המניה היום לעומת ממוצע חודשי, או דירוג הפופולריות של הטיקר ביחס לכלל השיחות ברשת. בהתאם, הוא מחזיר
– ערך הגבוה כאשר יש התלהבות חריגה )טון הפוסטים חיובי מאוד ויש זינוק בכמותם( ונמוך/שלילי ציון סנטימנט 
כאשר השיח שלילי או אדיש. לציון זה הוא מצרף דגלים, כמו "המניה בטופ 5 ב-WallStreetBets היום" או "עלייה של

300% בנפח ציוצים", לצורך הסברי החלטה.

הסוכנים מכל  הסיגנלים  שילוב  לוגיקת  את  מיישם   –  )ConsolidationAgent.py( קובץ   – קונסולידציה  סוכן   •
לכל סיגנל וכן תנאי לוגי לקבלת החלטה. לדוגמה, מוגדר המומחים והחלטת ההשקעה. בקובץ זה מוגדרים משקלים 
, 102 [אנומליות=0.15, טכני=0.25, פונדמנטלי=0.20, חדשות=0.25, סנטימנט=0.15] וקטור משקלות: 

השוואת מוגדרת  מכן,  לאחר   . score = 0.15*Anomaly + 0.25*Tech + ... סופי:  ציון  מחשב  והקוד 
score לסף )נניח 80/100( – אם הציון מעל הסף והתקיימו מינימום תנאים )למשל לפחות 2 תחומים חיוביים( אז
)כמו מאומן   ML לטעון מודל  יכול  המודול  בנוסף,   .False אחרת   , recommended  =  True
ערכי כל  את  לו  ולמסור   –  104 עבר נתוני  על  שאומן   Random Forest לדוגמה   –  ) ensemble_model.pkl
הפיצ’רים )כל ציוני הסוכנים וייתכן נתונים גולמיים נוספים( כדי לקבל תחזית הסתברות הפריצה. במצב כזה, ההחלטה
יכולה להתבסס על תחזית המודל )למשל Probability > 0.8 =< מומלץ(. המודול גם מטפל בקונפליקטים וכללי גיבוי:
, 31 30 )false positive למשל, "אם הציון הטכני נמוך מאוד )<20( אז אל תמליץ אפילו אם הכול אחר ירוק" )מנע
או "אם יש חדשות M&A מהותיות אז המלץ גם אם הפונדמנטל חלש". בתום החישוב, קובץ זה מפיק את אובייקט
ההחלטה הסופית – הכולל את שם המניה, הציון הסופי, והמלצה )"קנייה"/"מעקב"/"לא להשקעה"(, וכן סיכום מסוים
של הסיבות )למשל "מניה מומלצת: איתותים טכניים ופונדמנטליים חזקים + חדשות חיוביות, סנטימנט נייטרלי"(. כאן

למעשה מסתיים תהליך קבלת ההחלטה.

קובצי תצורה )Configuration( – המערכת נשענת על מספר קובצי הגדרות: למשל קובץ Thresholds.ini המכיל  •
וכו'(,  , anomalyVolumeFactor=3  , avgVol>100k  , $marketCap>50M )כמו  הראשוני  הסינון  ספי  את 

ורשימת חיוביות/שליליות(,  חדשות  על  שמצביעות  מילים  כמו  החדשות,  )לסוכן  לאירועים  מפתח  רשימת מילות 
/Yahoo-והשירותים )ל API-יכיל את מפתחות ה API_Keys.conf פורומים/חשבונות למעקב בסנטימנט. כמו כן, קובץ
סוכן של  ברירת-המחדל  את משקלי  להגדיר  עשוי  אחר  קובץ  וכו'(.   ,Reddit/Twitter-ל  ,AlphaVantage

הקונסולידציה, שניתן לכוונן כשרוכשים ניסיון.

6



– רכיב תשתיתי )למשל בסיס נתונים SQL או NoSQL( המשמש כזיכרון של המערכת. מומלץ מאגר נתונים פנימי   •
שהסוכנים מפיקים פנימי שבו יאוחסנו היסטוריית התוצאות והמדדים   )Data Warehouse( להקים מחסן נתונים
. למשל, מסד PostgreSQL שישמור מדי יום את ציוני הטכני/פונדמנטל/סנטימנט של כל מניה שנבדקה, ואת 121

החלטת ההשקעה. זה מאפשר לבצע ניתוח בדיעבד )Backtesting( – לבדוק כמה מהמניות שקיבלו המלצת "קנייה"
אכן זינקו בהמשך, לבחון מקרים מפוספסים, ולשפר את המודלים. לצורך backtesting, ניתן להריץ את כל המערכת
על נתוני עבר )למשל לבדוק האם עבור מניות כמו $TSLA ב-2019 או $GME בתחילת 2021 המערכת הייתה תופסת
זיהוי מודלי  המסכם,  )המודל   ML-ה מודלי  לאימון  משמש  גם  ההיסטורי  המאגר   . 122 המקדימים( הסיגנלים  את 

התבניות וכו' זקוקים לדאטה היסטורי ללמידה(.

( שאחראי על הרצת הסוכנים בסדר הנכון. Scheduler.py – סקריפט או שירות )למשל  רכיב תזמון/אוטומציה   •
למשל, בתחילת כל יום מסחר או באופן רציף, הוא יפעיל את סוכן הסינון הראשוני על כלל המניות, יקבל את רשימת
המועמדות, ויזריק אותן לפעולה מקבילית של סוכני הטכני/פונדמנטל/חדשות/סנטימנט. זה יכול להיעשות כקריאות
Apache כמו Message Broker-פנימיות )פונקציות( או באמצעות תורי הודעות – במערכת גדולה אפשר להשתמש ב
. תזמון זה 123 Kafka, כך שכל סוכן מפרסם את תוצאותיו לערוץ, וסוכן הקונסולידציה מאזין ואוסף את התוצאות
היום, באמצע  פתאומית  חדשות  הופיעה  אם  מחדש  הניתוח  סוכני  את  להריץ  למשל  שוטפים:  לעדכונים  גם  דואג 

וכדומה. 

בקיצור, המערכת המלאה מורכבת ממספר סוכני ליבה ותתי-סוכנים שכל אחד מטפל בהיבט נתונים ייחודי, ומשלבת מגוון
על משפיע  חלק  כל  ותזמור(.  אחסון,  נתונים,  )לשליפת  טכניים  עזר  וקבצי  מכונה(  לימוד  וגם  כללים  מבוססי  )גם  מודלים 
+ Technical + Fundamental( האחרים במובן ששרשרת ההחלטה תלויה בכולם – רק על ידי שילוב רב-מערכתי של האותות
News + Sentiment(, לאחר סינון קפדני, מתקבלת תמונת ביטחון גבוהה מספיק כדי להכריז על מניה כ"פורצת". מערכת
– יינתן רק כאשר מתקיים צירוף נדיר של סימנים חיוביים מכל רב-סוכנים זו מבטיחה שהתוצר הסופי – המלצת השקעה 
)כמו והבדיקות  הפיתוח  הליכי   . 3 פנומנלית תשואה  בעלות  השקעה  הזדמנויות  כמבשר  היסטורית  שהוכח  דבר  הכיוונים, 
מיטבית, תהיה  הסוכנים  בין  שהאינטראקציה  כך  והמשקלים  המודלים  את  לכייל  יסייעו  עבר(  אירועי  על   backtesting

ושהמערכת תספק למשקיע את ההמלצות המדויקות ביותר בזמן הנכון. 

pdf.)1( מערכת חיזוי מניות פורצות – מפרט טכני מפורט 20 19 18 16 15 13 12 11 10 5 1

file://file-HGEEFi8mYdRaWyPpFf977X

40 39 38 37 36 35 34 33 32 31 30 29 28 27 26 25 24 23 22 21 17 14 9 8 7 6 4 3 2

69 68 67 66 65 64 63 62 61 60 59 58 57 56 55 54 53 52 51 50 49 48 47 46 45 44 43 42 41

98 97 96 95 94 93 92 91 90 89 88 87 86 85 84 83 82 81 80 79 78 77 76 75 74 73 72 71 70

מערכת 123 122 121 120 119 118 117 116 115 114 113 112 111 110 109 108 107 106 105 104 103 102 101 100 99

pdf.חיזוי מניות למהלכי עליות חדות – תוכנית רב-סוכנים
file://file-D6gCCsHwdhy9SxoAZBR5QD

7